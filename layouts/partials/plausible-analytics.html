{{- if (site.Params.plausible.enabled) }}

        {{- printf "<!-- Dev mode : Is Plausible enabled? %#v -->" .Site.Params.Plausible.enabled | safeHTML }}
        {{- printf "<!-- Dev mode : Plausible Domain? %#v -->" .Site.Params.Plausible.domain | safeHTML }}

    {{- if (site.IsServer) }}
        {{- printf "<!-- We're in Development mode, so we're not going to load the plausible.js -->"| safeHTML }}
    {{- else }}
        <script defer data-domain="{{ .Site.Params.Plausible.domain }}" src="https://plausible.io/js/plausible.outbound-links.js"></script>
        <script>
            window.plausible =
                window.plausible ||
                function () {
                    (window.plausible.q = window.plausible.q || []).push(arguments);
                };
        </script>
    {{- end }}

{{- end }}

